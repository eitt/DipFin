
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>48. Introducción a Modelos de Series Temporales &#8212; My sample book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'DipFin Sesion 3.3';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="59. Introducción al Análisis de Clustering" href="DipFin%20Sesion%203.4.html" />
    <link rel="prev" title="37. 1. Introducción a las Redes Neuronales" href="DipFin%20Sesion%203.2.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="My sample book - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="My sample book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Introducción
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Fundamentos de Python y Estadística Básica</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="DipFin%20Sesion%201.1.html">1. Introducción a Python para Finanzas</a></li>




<li class="toctree-l1"><a class="reference internal" href="DipFin%20Sesion%201.2.html">6. Funciones en Python</a></li>


<li class="toctree-l1"><a class="reference internal" href="DipFin%20Sesion%201.3.html">9. Introducción a la Estadística en Python</a></li>




<li class="toctree-l1"><a class="reference internal" href="DipFin%20Sesion%201.4.html">14. Introducción a la Adquisición de Datos</a></li>



<li class="toctree-l1"><a class="reference internal" href="DipFin%20Sesion%201.5.html">18. Introducción a la Limpieza de Datos</a></li>



<li class="toctree-l1"><a class="reference internal" href="DipFin%20Sesion%203.1.html">22. Introducción a la Regresión Lineal</a></li>














<li class="toctree-l1"><a class="reference internal" href="DipFin%20Sesion%203.2.html">37. 1. Introducción a las Redes Neuronales</a></li>










<li class="toctree-l1 current active"><a class="current reference internal" href="#">48. Introducción a Modelos de Series Temporales</a></li>










<li class="toctree-l1"><a class="reference internal" href="DipFin%20Sesion%203.4.html">59. Introducción al Análisis de Clustering</a></li>



</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FDipFin Sesion 3.3.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/DipFin Sesion 3.3.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Introducción a Modelos de Series Temporales</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">48. Introducción a Modelos de Series Temporales</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definicion-de-series-temporales">48.1. Definición de Series Temporales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aplicaciones-en-finanzas">48.2. Aplicaciones en Finanzas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-introductorio-en-python">48.3. Ejemplo Introductorio en Python</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#modelado-arima-para-pronostico-de-mercados">49. Modelado ARIMA para Pronóstico de Mercados</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fundamentos-de-arima">49.1. Fundamentos de ARIMA</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seleccion-de-parametros-y-diagnostico">49.2. Selección de Parámetros y Diagnóstico</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#modelado-autoregresivo-ar">50. Modelado Autoregresivo (AR)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ecuacion-del-modelo-ar">50.1. Ecuación del Modelo AR</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#estimacion-de-parametros">50.2. Estimación de Parámetros</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#diagnostico-del-modelo">50.3. Diagnóstico del Modelo</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-grafico-con-python">50.4. Ejemplo Gráfico con Python</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#modelo-de-media-movil-ma">51. Modelo de Media Móvil (MA)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fundamentos-del-modelo-ma">51.1. Fundamentos del Modelo MA</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interpretacion-de-los-parametros">51.2. Interpretación de los Parámetros</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-grafico">51.3. Ejemplo Gráfico</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#historia-de-los-modelos-garch">52. Historia de los Modelos GARCH</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fundamentacion-matematica-de-garch">53. Fundamentación Matemática de GARCH</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#comparativo-entre-modelos-arima-y-garch">54. Comparativo entre Modelos ARIMA y GARCH</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplos-de-aplicacion-en-finanzas">55. Ejemplos de Aplicación en Finanzas</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-practico-uso-de-datos-reales-con-yahoo-finance">56. Ejemplo Práctico: Uso de Datos Reales con Yahoo Finance</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tipos-de-volatilidad-en-series-financieras">57. Tipos de Volatilidad en Series Financieras</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#volatilidad-historica-clasica">57.1. Volatilidad Histórica (Clásica)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#volatilidad-media-cero">57.2. Volatilidad Media Cero</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#volatilidad-con-suavizamiento-exponencial-tiempo-t">57.3. Volatilidad con Suavizamiento Exponencial (Tiempo <span class="math notranslate nohighlight">\( t \)</span>)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#volatilidad-con-suavizamiento-exponencial-tiempo-t-1">57.4. Volatilidad con Suavizamiento Exponencial (Tiempo <span class="math notranslate nohighlight">\( t+1 \)</span>)</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-valor-en-riesgo-var-utilizando-diferentes-metodos">58. Análisis de Valor en Riesgo (VaR) Utilizando Diferentes Métodos</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion">58.1. Introducción</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metodos-y-aplicaciones">58.1.1. Métodos y Aplicaciones</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#var-parametrico">58.1.1.1. VaR Paramétrico</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#var-no-parametrico">58.1.1.2. VaR No Paramétrico</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#var-montecarlo">58.1.1.3. VaR Montecarlo</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resultados">58.2. Resultados</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interpretacion-de-los-resultados">58.3. Interpretación de los Resultados</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion-a-la-frontera-eficiente">58.3.1. Introducción a la Frontera Eficiente</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#historia">58.3.1.1. Historia</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#concepto-matematico-de-dominancia">58.3.1.2. Concepto Matemático de Dominancia</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-con-10-acciones-usando-yahoofinance-y-calculos-en-python">58.3.1.3. Ejemplo con 10 Acciones Usando YahooFinance y Cálculos en Python</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conceptos-matematicos-para-el-calculo-de-volatilidad-y-retorno-esperado">58.3.2. Conceptos Matemáticos para el Cálculo de Volatilidad y Retorno Esperado</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#retorno-esperado">58.3.2.1. Retorno Esperado</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#volatilidad">58.3.2.2. Volatilidad</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#interpretacion-y-consideraciones">58.3.3. Interpretación y Consideraciones</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="introduccion-a-modelos-de-series-temporales">
<h1><span class="section-number">48. </span>Introducción a Modelos de Series Temporales<a class="headerlink" href="#introduccion-a-modelos-de-series-temporales" title="Link to this heading">#</a></h1>
<section id="definicion-de-series-temporales">
<h2><span class="section-number">48.1. </span>Definición de Series Temporales<a class="headerlink" href="#definicion-de-series-temporales" title="Link to this heading">#</a></h2>
<p>Una serie temporal es una secuencia de puntos de datos medidos en intervalos temporales sucesivos. En el contexto del análisis financiero, las series temporales son cruciales porque permiten observar y analizar patrones de comportamiento a lo largo del tiempo, identificar tendencias y estacionalidades, y hacer proyecciones futuras basadas en datos históricos. Su importancia radica en la capacidad de utilizar los datos pasados para modelar y predecir fenómenos financieros, lo cual es fundamental para la toma de decisiones informadas en mercados dinámicos.</p>
</section>
<section id="aplicaciones-en-finanzas">
<h2><span class="section-number">48.2. </span>Aplicaciones en Finanzas<a class="headerlink" href="#aplicaciones-en-finanzas" title="Link to this heading">#</a></h2>
<p>Las series temporales se aplican extensivamente en el ámbito financiero de diversas maneras:</p>
<ol class="arabic simple">
<li><p><strong>Pronóstico de Mercados Financieros</strong>: Utilizando modelos de series temporales, los analistas pueden predecir la dirección futura de los precios de activos financieros. Esto es fundamental para los traders y gestores de fondos en la maximización de ganancias y minimización de pérdidas.</p></li>
<li><p><strong>Análisis de Riesgo</strong>: Las series temporales ayudan a estimar el riesgo de diferentes activos financieros. Al modelar la volatilidad de los precios y las correlaciones entre diferentes activos, los inversores pueden optimizar sus portafolios y gestionar el riesgo de manera más efectiva.</p></li>
<li><p><strong>Decisiones de Inversión</strong>: Mediante el análisis de series temporales, los inversores pueden identificar ciclos económicos y tendencias de mercado que informan sus decisiones de inversión. Esto incluye la identificación de momentos óptimos para comprar o vender activos, o para diversificar inversiones.</p></li>
</ol>
</section>
<section id="ejemplo-introductorio-en-python">
<h2><span class="section-number">48.3. </span>Ejemplo Introductorio en Python<a class="headerlink" href="#ejemplo-introductorio-en-python" title="Link to this heading">#</a></h2>
<p>A continuación se presenta un ejemplo básico de cómo visualizar una serie temporal de precios de acciones utilizando Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>

<span class="c1"># Descargar datos de acciones de Apple (AAPL)</span>
<span class="n">datos</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2023-01-01&#39;</span><span class="p">)</span>

<span class="c1"># Seleccionar solo el precio de cierre ajustado</span>
<span class="n">precios</span> <span class="o">=</span> <span class="n">datos</span><span class="p">[</span><span class="s1">&#39;Adj Close&#39;</span><span class="p">]</span>

<span class="c1"># Visualizar la serie temporal de precios</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">precios</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Precio de Cierre Ajustado&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Serie Temporal de los Precios de Cierre Ajustados de AAPL&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Fecha&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Precio USD&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>

<span class="c1"># Descargar datos de acciones de Apple (AAPL)</span>
<span class="n">datos</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2023-01-01&#39;</span><span class="p">)</span>

<span class="c1"># Seleccionar solo el precio de cierre ajustado</span>
<span class="n">precios</span> <span class="o">=</span> <span class="n">datos</span><span class="p">[</span><span class="s1">&#39;Adj Close&#39;</span><span class="p">]</span>

<span class="c1"># Visualizar la serie temporal de precios</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">precios</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Precio de Cierre Ajustado&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Serie Temporal de los Precios de Cierre Ajustados de AAPL&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Fecha&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Precio USD&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[*********************100%%**********************]  1 of 1 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<img alt="_images/df5e9603dc7a0981df011b80d528605fde47983085b9970c174be949e524ef3d.png" src="_images/df5e9603dc7a0981df011b80d528605fde47983085b9970c174be949e524ef3d.png" />
</div>
</div>
</section>
</section>
<section id="modelado-arima-para-pronostico-de-mercados">
<h1><span class="section-number">49. </span>Modelado ARIMA para Pronóstico de Mercados<a class="headerlink" href="#modelado-arima-para-pronostico-de-mercados" title="Link to this heading">#</a></h1>
<section id="fundamentos-de-arima">
<h2><span class="section-number">49.1. </span>Fundamentos de ARIMA<a class="headerlink" href="#fundamentos-de-arima" title="Link to this heading">#</a></h2>
<p>ARIMA, que significa Modelo Autoregresivo Integrado de Media Móvil, es un enfoque popular para el análisis y pronóstico de series temporales. El modelo ARIMA se compone de tres componentes principales:</p>
<ul class="simple">
<li><p><strong>AR (p) – Autoregresivo</strong>: El componente autoregresivo en un modelo ARIMA representa la relación entre una observación y un número determinado de retardos (lagged observations) de sí misma. El parámetro ‘p’ define el número de términos autoregresivos.</p></li>
<li><p><strong>I (d) – Integrado</strong>: Este componente hace que la serie temporal sea estacionaria mediante la diferenciación de los datos un número específico de veces, denotado por ‘d’.</p></li>
<li><p><strong>MA (q) – Media Móvil</strong>: El componente de media móvil modela el error de la predicción como una combinación lineal de errores de predicciones pasadas. El parámetro ‘q’ indica el número de términos de media móvil.</p></li>
</ul>
<p>La aplicabilidad de ARIMA en datos financieros radica en su capacidad para modelar y predecir valores futuros basándose en la información de series temporales no estacionarias, lo que es común en datos financieros como precios de acciones o índices económicos.</p>
</section>
<section id="seleccion-de-parametros-y-diagnostico">
<h2><span class="section-number">49.2. </span>Selección de Parámetros y Diagnóstico<a class="headerlink" href="#seleccion-de-parametros-y-diagnostico" title="Link to this heading">#</a></h2>
<p>La selección de los parámetros p, d, q en un modelo ARIMA es crucial y se realiza en varias etapas:</p>
<ol class="arabic simple">
<li><p><strong>Determinación de la Estacionariedad</strong>: Antes de ajustar un modelo ARIMA, es esencial verificar la estacionariedad de la serie temporal utilizando pruebas como la prueba de Dickey-Fuller aumentada (ADF). Una serie no estacionaria se puede transformar en estacionaria diferenciándola.</p></li>
<li><p><strong>Identificación de los Parámetros (p, q)</strong>: Una vez estacionaria la serie, los parámetros p y q se pueden estimar observando las funciones de autocorrelación (ACF) y autocorrelación parcial (PACF). El parámetro ‘p’ puede estimarse a partir de los picos significativos en la PACF, mientras que ‘q’ se puede identificar a partir de la ACF.</p></li>
<li><p><strong>Validación del Modelo</strong>: El ajuste del modelo se puede diagnosticar revisando el gráfico de los residuos. Los residuos deben comportarse como ruido blanco (i.e., ser estacionarios y aproximadamente normales).</p></li>
</ol>
</section>
</section>
<section id="modelado-autoregresivo-ar">
<h1><span class="section-number">50. </span>Modelado Autoregresivo (AR)<a class="headerlink" href="#modelado-autoregresivo-ar" title="Link to this heading">#</a></h1>
<p>El modelo Autoregresivo (AR) es una de las técnicas de modelado de series temporales más utilizadas y es fundamental para entender cómo se comportan las variables a lo largo del tiempo. En este modelo, se asume que el valor actual de la serie es una combinación lineal de sus valores anteriores más un término de error.</p>
<section id="ecuacion-del-modelo-ar">
<h2><span class="section-number">50.1. </span>Ecuación del Modelo AR<a class="headerlink" href="#ecuacion-del-modelo-ar" title="Link to this heading">#</a></h2>
<p>Un modelo AR(p) se puede expresar con la siguiente ecuación:</p>
<div class="math notranslate nohighlight">
\[ X_t = c + \phi_1 X_{t-1} + \phi_2 X_{t-2} + \dots + \phi_p X_{t-p} + \epsilon_t \]</div>
<p>donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(X_t \)</span>es el valor actual de la serie temporal.</p></li>
<li><p><span class="math notranslate nohighlight">\( c \)</span> es una constante.</p></li>
<li><p><span class="math notranslate nohighlight">\( \phi_1, \phi_2, \dots, \phi_p \)</span> son los parámetros del modelo que necesitan ser estimados.</p></li>
<li><p><span class="math notranslate nohighlight">\( p \)</span> es el número de retardos.</p></li>
<li><p><span class="math notranslate nohighlight">\( \epsilon_t \)</span> es el término de error, que se asume es un ruido blanco.</p></li>
</ul>
</section>
<section id="estimacion-de-parametros">
<h2><span class="section-number">50.2. </span>Estimación de Parámetros<a class="headerlink" href="#estimacion-de-parametros" title="Link to this heading">#</a></h2>
<p>La estimación de los parámetros del modelo AR se realiza comúnmente mediante el método de mínimos cuadrados ordinarios (OLS), buscando minimizar la suma de cuadrados de los errores.</p>
</section>
<section id="diagnostico-del-modelo">
<h2><span class="section-number">50.3. </span>Diagnóstico del Modelo<a class="headerlink" href="#diagnostico-del-modelo" title="Link to this heading">#</a></h2>
<p>Para validar un modelo AR, es esencial verificar:</p>
<ul class="simple">
<li><p><strong>Estacionariedad</strong>: La serie debe ser estacionaria para que el modelo AR sea válido. Esto se puede comprobar mediante la prueba de Dickey-Fuller aumentada.</p></li>
<li><p><strong>Autocorrelación de los Residuos</strong>: Los residuos del modelo deberían comportarse como ruido blanco. Esto se puede verificar mediante la función de autocorrelación (ACF).</p></li>
</ul>
</section>
<section id="ejemplo-grafico-con-python">
<h2><span class="section-number">50.4. </span>Ejemplo Gráfico con Python<a class="headerlink" href="#ejemplo-grafico-con-python" title="Link to this heading">#</a></h2>
<p>A continuación, se muestra cómo modelar y visualizar un modelo AR(2) usando Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">statsmodels.tsa.ar_model</span> <span class="kn">import</span> <span class="n">AutoReg</span>
<span class="kn">from</span> <span class="nn">statsmodels.graphics.tsaplots</span> <span class="kn">import</span> <span class="n">plot_acf</span><span class="p">,</span> <span class="n">plot_pacf</span>

<span class="c1"># Simulación de datos AR(2)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">alpha1</span> <span class="o">=</span> <span class="mf">0.666</span>
<span class="n">alpha2</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.333</span>
<span class="n">lags</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="n">time_series</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lags</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="n">time_series</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">alpha1</span> <span class="o">*</span> <span class="n">time_series</span><span class="p">[</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">alpha2</span> <span class="o">*</span> <span class="n">time_series</span><span class="p">[</span><span class="n">t</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">error</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>

<span class="c1"># Ajuste del modelo AR(2)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">AutoReg</span><span class="p">(</span><span class="n">time_series</span><span class="p">,</span> <span class="n">lags</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">model_fit</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>

<span class="c1"># Gráficos</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="c1"># Serie temporal</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time_series</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Simulación de Serie Temporal AR(2)&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Tiempo&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Valor&#39;</span><span class="p">)</span>

<span class="c1"># Función de Autocorrelación Parcial</span>
<span class="n">plot_pacf</span><span class="p">(</span><span class="n">model_fit</span><span class="o">.</span><span class="n">resid</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Autocorrelación Parcial de los Residuos&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="modelo-de-media-movil-ma">
<h1><span class="section-number">51. </span>Modelo de Media Móvil (MA)<a class="headerlink" href="#modelo-de-media-movil-ma" title="Link to this heading">#</a></h1>
<p>El Modelo de Media Móvil (MA, por sus siglas en inglés) es un componente clave en el modelado de series temporales, especialmente utilizado en la estructura de modelos ARIMA. Este modelo puede ayudar a entender y predecir las series temporales basándose en la relación entre un valor observado y el conjunto de errores de predicción pasados.</p>
<section id="fundamentos-del-modelo-ma">
<h2><span class="section-number">51.1. </span>Fundamentos del Modelo MA<a class="headerlink" href="#fundamentos-del-modelo-ma" title="Link to this heading">#</a></h2>
<p>En el modelo de media móvil, cada término de la serie temporal puede ser expresado como una función lineal de los términos de error pasados. Esto se puede representar matemáticamente de la siguiente manera:</p>
<div class="math notranslate nohighlight">
\[ X_t = \mu + \epsilon_t + \theta_1 \epsilon_{t-1} + \theta_2 \epsilon_{t-2} + \dots + \theta_q \epsilon_{t-q} \]</div>
<p>donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\( X_t \)</span> es el valor de la serie en el tiempo <span class="math notranslate nohighlight">\( t \)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\( \mu \)</span> es la media de la serie,</p></li>
<li><p><span class="math notranslate nohighlight">\( \epsilon_t \)</span> es el término de error en el tiempo <span class="math notranslate nohighlight">\( t \)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\( \theta_1, \theta_2, \dots, \theta_q \)</span> son los parámetros del modelo, y</p></li>
<li><p><span class="math notranslate nohighlight">\( q \)</span> es el orden del modelo MA, es decir, el número de términos de error que se consideran.</p></li>
</ul>
</section>
<section id="interpretacion-de-los-parametros">
<h2><span class="section-number">51.2. </span>Interpretación de los Parámetros<a class="headerlink" href="#interpretacion-de-los-parametros" title="Link to this heading">#</a></h2>
<p>En un modelo MA, los parámetros <span class="math notranslate nohighlight">\( \theta_1, \theta_2, \dots, \theta_q \)</span> representan la magnitud y la influencia de los errores pasados en el valor actual de la serie. Si <span class="math notranslate nohighlight">\( \theta \)</span> es grande, entonces los errores pasados tienen un efecto significativo en el valor actual.</p>
</section>
<section id="ejemplo-grafico">
<h2><span class="section-number">51.3. </span>Ejemplo Gráfico<a class="headerlink" href="#ejemplo-grafico" title="Link to this heading">#</a></h2>
<p>Consideremos una serie temporal simple y apliquemos un modelo MA(1) para visualizar cómo el modelo se ajusta a los datos. A continuación, presentamos un código en Python que genera datos simulados y aplica un modelo MA(1):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">statsmodels.tsa.arima_process</span> <span class="kn">import</span> <span class="n">ArmaProcess</span>

<span class="c1"># Parámetros del modelo MA(1)</span>
<span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.6</span><span class="p">])</span>
<span class="n">arma_process</span> <span class="o">=</span> <span class="n">ArmaProcess</span><span class="p">(</span><span class="n">ma</span><span class="o">=</span><span class="n">theta</span><span class="p">)</span>

<span class="c1"># Generar datos simulados</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="n">simulated_data</span> <span class="o">=</span> <span class="n">arma_process</span><span class="o">.</span><span class="n">generate_sample</span><span class="p">(</span><span class="n">nsample</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># Visualización de los datos</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">simulated_data</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Datos Simulados&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Simulación de un Modelo MA(1) con θ = 0.6&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Tiempo&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Valor&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Este ejemplo genera y visualiza una serie temporal que sigue un modelo MA(1) con un parámetro de <span class="math notranslate nohighlight">\( \theta = 0.6 \)</span>. En este modelo, cada valor de la serie es influido principalmente por el error inmediato anterior, ajustado por el factor 0.6.</p>
<p>#3 Modelos GARCH</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">arch</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting arch
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Downloading arch-7.0.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (13 kB)
Requirement already satisfied: numpy&gt;=1.22.3 in /home/codespace/.local/lib/python3.10/site-packages (from arch) (1.26.4)
Requirement already satisfied: scipy&gt;=1.8 in /home/codespace/.local/lib/python3.10/site-packages (from arch) (1.13.0)
Requirement already satisfied: pandas&gt;=1.4 in /home/codespace/.local/lib/python3.10/site-packages (from arch) (2.2.2)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting statsmodels&gt;=0.12 (from arch)
  Downloading statsmodels-0.14.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (9.2 kB)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: python-dateutil&gt;=2.8.2 in /home/codespace/.local/lib/python3.10/site-packages (from pandas&gt;=1.4-&gt;arch) (2.9.0.post0)
Requirement already satisfied: pytz&gt;=2020.1 in /home/codespace/.local/lib/python3.10/site-packages (from pandas&gt;=1.4-&gt;arch) (2024.1)
Requirement already satisfied: tzdata&gt;=2022.7 in /home/codespace/.local/lib/python3.10/site-packages (from pandas&gt;=1.4-&gt;arch) (2024.1)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Collecting patsy&gt;=0.5.6 (from statsmodels&gt;=0.12-&gt;arch)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Downloading patsy-0.5.6-py2.py3-none-any.whl.metadata (3.5 kB)
Requirement already satisfied: packaging&gt;=21.3 in /home/codespace/.local/lib/python3.10/site-packages (from statsmodels&gt;=0.12-&gt;arch) (24.0)
Requirement already satisfied: six in /home/codespace/.local/lib/python3.10/site-packages (from patsy&gt;=0.5.6-&gt;statsmodels&gt;=0.12-&gt;arch) (1.16.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading arch-7.0.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (983 kB)
?25l   <span class=" -Color -Color-C237">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">0.0/983.4 kB</span> <span class=" -Color -Color-Red">?</span> eta <span class=" -Color -Color-Cyan">-:--:--</span>
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ <span class=" -Color -Color-Green">983.0/983.4 kB</span> <span class=" -Color -Color-Red">41.4 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">983.4/983.4 kB</span> <span class=" -Color -Color-Red">17.5 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:00</span>
?25hDownloading statsmodels-0.14.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (10.8 MB)
?25l   <span class=" -Color -Color-C237">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">0.0/10.8 MB</span> <span class=" -Color -Color-Red">?</span> eta <span class=" -Color -Color-Cyan">-:--:--</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   ━━━━━━━━━━━━━━━━━━━━━━━╸<span class=" -Color -Color-C237">━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">6.4/10.8 MB</span> <span class=" -Color -Color-Red">192.2 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ <span class=" -Color -Color-Green">10.8/10.8 MB</span> <span class=" -Color -Color-Red">207.4 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ <span class=" -Color -Color-Green">10.8/10.8 MB</span> <span class=" -Color -Color-Red">207.4 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ <span class=" -Color -Color-Green">10.8/10.8 MB</span> <span class=" -Color -Color-Red">207.4 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:01</span>
   <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">10.8/10.8 MB</span> <span class=" -Color -Color-Red">72.9 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:00</span>
?25hDownloading patsy-0.5.6-py2.py3-none-any.whl (233 kB)
?25l   <span class=" -Color -Color-C237">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">0.0/233.9 kB</span> <span class=" -Color -Color-Red">?</span> eta <span class=" -Color -Color-Cyan">-:--:--</span>
   <span class=" -Color -Color-Red">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> <span class=" -Color -Color-Green">233.9/233.9 kB</span> <span class=" -Color -Color-Red">7.8 MB/s</span> eta <span class=" -Color -Color-Cyan">0:00:00</span>
?25h
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Installing collected packages: patsy, statsmodels, arch
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Successfully installed arch-7.0.0 patsy-0.5.6 statsmodels-0.14.2
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Note: you may need to restart the kernel to use updated packages.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">statsmodels.tsa.stattools</span> <span class="kn">import</span> <span class="n">acf</span><span class="p">,</span> <span class="n">pacf</span>
<span class="kn">from</span> <span class="nn">arch</span> <span class="kn">import</span> <span class="n">arch_model</span>

<span class="c1"># Generar una serie de tiempo con acumulaciones de varianza</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">series</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="n">sigma</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="n">sigma</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">sigma</span><span class="p">[</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">()</span>
    <span class="n">series</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">sigma</span><span class="p">[</span><span class="n">t</span><span class="p">]))</span>

<span class="c1"># Crear un DataFrame para organizar los datos</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Series&#39;</span><span class="p">:</span> <span class="n">series</span><span class="p">})</span>

<span class="c1"># Suavizado por media móvil</span>
<span class="n">window_size</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Moving_Avg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Series&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">window_size</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Ajuste del modelo GARCH</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">arch_model</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Series&#39;</span><span class="p">],</span> <span class="n">vol</span><span class="o">=</span><span class="s1">&#39;Garch&#39;</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">garch_fit</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">disp</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;GARCH_Volatility&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">garch_fit</span><span class="o">.</span><span class="n">conditional_volatility</span>

<span class="c1"># Graficar las series</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Series&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Serie Original&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Moving_Avg&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Media Móvil&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;GARCH_Volatility&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Volatilidad GARCH&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Serie Original, Media Móvil y Volatilidad GARCH&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Tiempo&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Valor&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/baf1930a115a99e0eec89240c87cc32e9df13cbda190c42b1d224daded1b067d.png" src="_images/baf1930a115a99e0eec89240c87cc32e9df13cbda190c42b1d224daded1b067d.png" />
</div>
</div>
</section>
</section>
<section id="historia-de-los-modelos-garch">
<h1><span class="section-number">52. </span>Historia de los Modelos GARCH<a class="headerlink" href="#historia-de-los-modelos-garch" title="Link to this heading">#</a></h1>
<p>Los modelos GARCH (Generalized Autoregressive Conditional Heteroskedasticity) fueron introducidos por Robert Engle en 1982, y posteriormente generalizados por Tim Bollerslev en 1986. Estos modelos surgieron como una extensión de los modelos ARCH (Autoregressive Conditional Heteroskedasticity) propuestos por Engle, con el objetivo de modelar la volatilidad estocástica en series temporales financieras, donde las observaciones suelen presentar agrupaciones de volatilidad.</p>
</section>
<section id="fundamentacion-matematica-de-garch">
<h1><span class="section-number">53. </span>Fundamentación Matemática de GARCH<a class="headerlink" href="#fundamentacion-matematica-de-garch" title="Link to this heading">#</a></h1>
<p>Un modelo GARCH(p, q) puede describirse de la siguiente manera:</p>
<ul class="simple">
<li><p><strong>Ecuación de la Media</strong>: <span class="math notranslate nohighlight">\( y_t = \mu + \epsilon_t \)</span></p></li>
<li><p><strong>Ecuación de la Varianza Condicional</strong>: <span class="math notranslate nohighlight">\( \sigma_t^2 = \alpha_0 + \sum_{i=1}^p \alpha_i \epsilon_{t-i}^2 + \sum_{j=1}^q \beta_j \sigma_{t-j}^2 \)</span></p></li>
</ul>
<p>donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\( \mu \)</span> es la media de la serie.</p></li>
<li><p><span class="math notranslate nohighlight">\( \epsilon_t \)</span> son los residuos de la serie en el tiempo t.</p></li>
<li><p><span class="math notranslate nohighlight">\( \sigma_t^2 \)</span> es la varianza condicional (heteroskedasticidad).</p></li>
<li><p><span class="math notranslate nohighlight">\( \alpha_0, \alpha_i, \beta_j \)</span> son parámetros del modelo.</p></li>
</ul>
</section>
<section id="comparativo-entre-modelos-arima-y-garch">
<h1><span class="section-number">54. </span>Comparativo entre Modelos ARIMA y GARCH<a class="headerlink" href="#comparativo-entre-modelos-arima-y-garch" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Característica</p></th>
<th class="head"><p>ARIMA</p></th>
<th class="head"><p>GARCH</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Objetivo</strong></p></td>
<td><p>Modelar y predecir valores</p></td>
<td><p>Modelar y predecir volatilidad</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Componentes</strong></p></td>
<td><p>Diferenciación, AR, MA</p></td>
<td><p>AR, MA aplicados a la varianza</p></td>
</tr>
<tr class="row-even"><td><p><strong>Uso de la Varianza</strong></p></td>
<td><p>Constante a lo largo del tiempo</p></td>
<td><p>Cambia con el tiempo</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Aplicación</strong></p></td>
<td><p>Series temporales generales</p></td>
<td><p>Series con volatilidad variable</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="ejemplos-de-aplicacion-en-finanzas">
<h1><span class="section-number">55. </span>Ejemplos de Aplicación en Finanzas<a class="headerlink" href="#ejemplos-de-aplicacion-en-finanzas" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p><strong>Gestión de Riesgos</strong>: Utilización de GARCH para estimar el Value at Risk (VaR) en carteras de inversión.</p></li>
<li><p><strong>Mercados de Derivados</strong>: Modelado de la volatilidad implícita en opciones y futuros.</p></li>
<li><p><strong>Pronóstico de Volatilidad</strong>: Pronóstico de cambios en la volatilidad de mercados financieros para estrategias de trading.</p></li>
</ol>
</section>
<section id="ejemplo-practico-uso-de-datos-reales-con-yahoo-finance">
<h1><span class="section-number">56. </span>Ejemplo Práctico: Uso de Datos Reales con Yahoo Finance<a class="headerlink" href="#ejemplo-practico-uso-de-datos-reales-con-yahoo-finance" title="Link to this heading">#</a></h1>
<p>A continuación, se muestra un ejemplo práctico de cómo obtener datos de Yahoo Finance y aplicar un modelo GARCH para analizar la volatilidad de un activo financiero, como el índice S&amp;P 500.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>
<span class="kn">from</span> <span class="nn">arch</span> <span class="kn">import</span> <span class="n">arch_model</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Descargar datos del S&amp;P 500</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;^GSPC&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2022-01-01&#39;</span><span class="p">)</span>

<span class="c1"># Calcular los retornos diarios</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Returns&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># Modelo GARCH(1,1)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">arch_model</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Returns&#39;</span><span class="p">],</span> <span class="n">vol</span><span class="o">=</span><span class="s1">&#39;Garch&#39;</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">model_fit</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">disp</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="c1"># Graficar la volatilidad estimada</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">model_fit</span><span class="o">.</span><span class="n">conditional_volatility</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Volatilidad Estimada del S&amp;P 500&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>
<span class="kn">from</span> <span class="nn">arch</span> <span class="kn">import</span> <span class="n">arch_model</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Descargar datos del S&amp;P 500</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;^GSPC&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2022-01-01&#39;</span><span class="p">)</span>

<span class="c1"># Calcular los retornos diarios y eliminar cualquier valor NaN</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Returns&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="c1"># Verifica que no hay valores infinitos o NaN antes de continuar</span>
<span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Returns&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()</span> <span class="ow">or</span> <span class="n">np</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Returns&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;La serie contiene valores NaN o infinitos.&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># Modelo GARCH(1,1)</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">arch_model</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Returns&#39;</span><span class="p">],</span> <span class="n">vol</span><span class="o">=</span><span class="s1">&#39;Garch&#39;</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">model_fit</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">disp</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

    <span class="c1"># Graficar la volatilidad estimada</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">model_fit</span><span class="o">.</span><span class="n">conditional_volatility</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Volatilidad Estimada del S&amp;P 500&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[*********************100%%**********************]  1 of 1 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/local/python/3.10.13/lib/python3.10/site-packages/arch/univariate/base.py:311: DataScaleWarning: y is poorly scaled, which may affect convergence of the optimizer when
estimating the model parameters. The scale of y is 0.000269. Parameter
estimation work better when this value is between 1 and 1000. The recommended
rescaling is 100 * y.

This warning can be disabled by either rescaling y before initializing the
model or by setting rescale=False.

  warnings.warn(
</pre></div>
</div>
<img alt="_images/86ef4f1a15fb97b80bda5c641efe7021cc80d6f58209386627754d1b499db6f3.png" src="_images/86ef4f1a15fb97b80bda5c641efe7021cc80d6f58209386627754d1b499db6f3.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Open</th>
      <th>High</th>
      <th>Low</th>
      <th>Close</th>
      <th>Adj Close</th>
      <th>Volume</th>
      <th>Returns</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-01-03</th>
      <td>3226.360107</td>
      <td>3246.149902</td>
      <td>3222.340088</td>
      <td>3234.850098</td>
      <td>3234.850098</td>
      <td>3484700000</td>
      <td>-0.007060</td>
    </tr>
    <tr>
      <th>2020-01-06</th>
      <td>3217.550049</td>
      <td>3246.840088</td>
      <td>3214.639893</td>
      <td>3246.280029</td>
      <td>3246.280029</td>
      <td>3702460000</td>
      <td>0.003533</td>
    </tr>
    <tr>
      <th>2020-01-07</th>
      <td>3241.860107</td>
      <td>3244.909912</td>
      <td>3232.429932</td>
      <td>3237.179932</td>
      <td>3237.179932</td>
      <td>3435910000</td>
      <td>-0.002803</td>
    </tr>
    <tr>
      <th>2020-01-08</th>
      <td>3238.590088</td>
      <td>3267.070068</td>
      <td>3236.669922</td>
      <td>3253.050049</td>
      <td>3253.050049</td>
      <td>3726840000</td>
      <td>0.004902</td>
    </tr>
    <tr>
      <th>2020-01-09</th>
      <td>3266.030029</td>
      <td>3275.580078</td>
      <td>3263.669922</td>
      <td>3274.699951</td>
      <td>3274.699951</td>
      <td>3641230000</td>
      <td>0.006655</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2021-12-27</th>
      <td>4733.990234</td>
      <td>4791.490234</td>
      <td>4733.990234</td>
      <td>4791.189941</td>
      <td>4791.189941</td>
      <td>2770290000</td>
      <td>0.013839</td>
    </tr>
    <tr>
      <th>2021-12-28</th>
      <td>4795.490234</td>
      <td>4807.020020</td>
      <td>4780.040039</td>
      <td>4786.350098</td>
      <td>4786.350098</td>
      <td>2707920000</td>
      <td>-0.001010</td>
    </tr>
    <tr>
      <th>2021-12-29</th>
      <td>4788.640137</td>
      <td>4804.060059</td>
      <td>4778.080078</td>
      <td>4793.060059</td>
      <td>4793.060059</td>
      <td>2963310000</td>
      <td>0.001402</td>
    </tr>
    <tr>
      <th>2021-12-30</th>
      <td>4794.229980</td>
      <td>4808.930176</td>
      <td>4775.330078</td>
      <td>4778.729980</td>
      <td>4778.729980</td>
      <td>3124950000</td>
      <td>-0.002990</td>
    </tr>
    <tr>
      <th>2021-12-31</th>
      <td>4775.209961</td>
      <td>4786.830078</td>
      <td>4765.750000</td>
      <td>4766.180176</td>
      <td>4766.180176</td>
      <td>2677820000</td>
      <td>-0.002626</td>
    </tr>
  </tbody>
</table>
<p>504 rows × 7 columns</p>
</div></div></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="tipos-de-volatilidad-en-series-financieras">
<h1><span class="section-number">57. </span>Tipos de Volatilidad en Series Financieras<a class="headerlink" href="#tipos-de-volatilidad-en-series-financieras" title="Link to this heading">#</a></h1>
<section id="volatilidad-historica-clasica">
<h2><span class="section-number">57.1. </span>Volatilidad Histórica (Clásica)<a class="headerlink" href="#volatilidad-historica-clasica" title="Link to this heading">#</a></h2>
<p>La volatilidad histórica, también conocida como volatilidad clásica, es una medida de la dispersión de los retornos de un activo financiero en un período histórico determinado. Se calcula como la desviación estándar de los retornos logarítmicos.</p>
<p><strong>Ecuación Matemática</strong>:
$<span class="math notranslate nohighlight">\( \text{Volatilidad Histórica} = \sigma = 100 \times \text{std}(R_i) \)</span>$</p>
<p><strong>Aplicación</strong>: Esta volatilidad es ampliamente usada para modelar el riesgo en carteras de inversión y para la valoración de instrumentos derivados.</p>
</section>
<section id="volatilidad-media-cero">
<h2><span class="section-number">57.2. </span>Volatilidad Media Cero<a class="headerlink" href="#volatilidad-media-cero" title="Link to this heading">#</a></h2>
<p>La volatilidad media cero es una forma simplificada de calcular la volatilidad, donde se asume que la media de los retornos es cero. Esto permite enfocarse únicamente en la variabilidad de los retornos.</p>
<p><strong>Ecuación Matemática</strong>:
$<span class="math notranslate nohighlight">\( \text{Volatilidad Media Cero} = 100 \times \sqrt{\frac{\sum (R_i^2)}{n}} \)</span>$</p>
<p><strong>Aplicación</strong>: Útil para cálculos rápidos y estimaciones donde la media de los retornos puede ser insignificante o desconocida.</p>
</section>
<section id="volatilidad-con-suavizamiento-exponencial-tiempo-t">
<h2><span class="section-number">57.3. </span>Volatilidad con Suavizamiento Exponencial (Tiempo <span class="math notranslate nohighlight">\( t \)</span>)<a class="headerlink" href="#volatilidad-con-suavizamiento-exponencial-tiempo-t" title="Link to this heading">#</a></h2>
<p>Este tipo de volatilidad utiliza el suavizamiento exponencial para ponderar más fuertemente los retornos más recientes, utilizando un factor de descuento <span class="math notranslate nohighlight">\( \lambda \)</span>.</p>
<p><strong>Ecuación Matemática</strong>:
$<span class="math notranslate nohighlight">\( \text{Volatilidad con Suavizamiento Exponencial en } t = 100 \times \sqrt{(1-\lambda) \times \sum (A_t)} \)</span><span class="math notranslate nohighlight">\(
donde \)</span> A_t = R_i^2 \times \lambda^{(i-1)} $</p>
<p><strong>Aplicación</strong>: Utilizada en modelos de predicción de volatilidad que requieren ajustes rápidos a cambios recientes en la volatilidad del mercado.</p>
</section>
<section id="volatilidad-con-suavizamiento-exponencial-tiempo-t-1">
<h2><span class="section-number">57.4. </span>Volatilidad con Suavizamiento Exponencial (Tiempo <span class="math notranslate nohighlight">\( t+1 \)</span>)<a class="headerlink" href="#volatilidad-con-suavizamiento-exponencial-tiempo-t-1" title="Link to this heading">#</a></h2>
<p>Estima la volatilidad en el siguiente período (<span class="math notranslate nohighlight">\( t+1 \)</span>), incorporando el último retorno cuadrado junto con el valor suavizado hasta <span class="math notranslate nohighlight">\( t \)</span>.</p>
<p><strong>Ecuación Matemática</strong>:
$<span class="math notranslate nohighlight">\( \text{Volatilidad con Suavizamiento Exponencial en } t+1 = 100 \times \sqrt{(1-\lambda) \times R_{\text{último}}^2 + \lambda \times \text{VAR}_{\text{último}}} \)</span>$</p>
<p><strong>Aplicación</strong>: Especialmente útil para el cálculo de requerimientos de margen y para la gestión del riesgo de volatilidad en tiempo real.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yahooFinance</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">minimize</span>

<span class="k">def</span> <span class="nf">fetch_stock_data</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="s2">&quot;5y&quot;</span><span class="p">):</span>
    <span class="n">stock</span> <span class="o">=</span> <span class="n">yahooFinance</span><span class="o">.</span><span class="n">Ticker</span><span class="p">(</span><span class="n">ticker</span><span class="p">)</span>
    <span class="n">stock_history</span> <span class="o">=</span> <span class="n">stock</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="n">period</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">stock_history</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="s2">&quot;Close&quot;</span><span class="p">]]</span>
    <span class="k">return</span> <span class="n">df</span>

<span class="k">def</span> <span class="nf">calculate_log_returns</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;R_i&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>

<span class="k">def</span> <span class="nf">calculate_squared_returns</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;R_i_squared&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;R_i&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span>
    <span class="k">return</span> <span class="n">df</span>

<span class="k">def</span> <span class="nf">add_inverse_index</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>

<span class="k">def</span> <span class="nf">apply_exponential_smoothing</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">lam</span><span class="p">):</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;R_i_squared&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">lam</span> <span class="o">**</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;VAR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)):</span>
        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;VAR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">lam</span><span class="p">)</span> <span class="o">*</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;VAR&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">df</span>

<span class="k">def</span> <span class="nf">add_custom_column</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">lam</span><span class="p">):</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;R_i_squared&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">lam</span> <span class="o">*</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;VAR&#39;</span><span class="p">]))</span> <span class="o">**</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">df</span>

<span class="k">def</span> <span class="nf">calculate_rmse_weight</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">weight</span><span class="o">=</span><span class="mi">1000000</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">]))</span><span class="o">*</span><span class="n">weight</span>

<span class="k">def</span> <span class="nf">calculate_rmse</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">]))</span>

<span class="k">def</span> <span class="nf">optimize_lam</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">initial_lam</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()):</span>
    <span class="k">def</span> <span class="nf">rmse_lam</span><span class="p">(</span><span class="n">lam</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lam</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">lam</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
        <span class="n">df_copy</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">df_copy</span> <span class="o">=</span> <span class="n">apply_exponential_smoothing</span><span class="p">(</span><span class="n">df_copy</span><span class="p">,</span> <span class="n">lam</span><span class="o">=</span><span class="n">lam</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">df_copy</span> <span class="o">=</span> <span class="n">add_custom_column</span><span class="p">(</span><span class="n">df_copy</span><span class="p">,</span> <span class="n">lam</span><span class="o">=</span><span class="n">lam</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">calculate_rmse_weight</span><span class="p">(</span><span class="n">df_copy</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">minimize</span><span class="p">(</span><span class="n">rmse_lam</span><span class="p">,</span> <span class="p">[</span><span class="n">initial_lam</span><span class="p">],</span> <span class="n">bounds</span><span class="o">=</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">success</span> <span class="k">else</span> <span class="n">initial_lam</span>

<span class="k">def</span> <span class="nf">calculate_volatilities</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">lam</span><span class="p">):</span>
    <span class="n">apply_exponential_smoothing</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">lam</span><span class="p">)</span>
    <span class="n">add_custom_column</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">lam</span><span class="p">)</span>
    <span class="n">historical_volatility</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;R_i&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
    <span class="n">mean_zero_volatility</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;R_i_squared&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;R_i&#39;</span><span class="p">]))</span> <span class="o">**</span> <span class="mf">0.5</span>
    <span class="n">exp_smoothing_volatility_t</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">lam</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()))</span> <span class="o">**</span> <span class="mf">0.5</span>
    <span class="n">last_squared_return</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;R_i_squared&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">exp_smoothing_volatility_t1</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">(((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">lam</span><span class="p">)</span> <span class="o">*</span> <span class="n">last_squared_return</span> <span class="o">+</span> <span class="n">lam</span> <span class="o">*</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;VAR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">historical_volatility</span><span class="p">,</span> <span class="n">mean_zero_volatility</span><span class="p">,</span> <span class="n">exp_smoothing_volatility_t</span><span class="p">,</span> <span class="n">exp_smoothing_volatility_t1</span>

<span class="c1"># Execution flow</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">fetch_stock_data</span><span class="p">(</span><span class="s2">&quot;AAPL&quot;</span><span class="p">)</span>
<span class="c1"># df = pd.read_excel(&quot;/content/Bombastic_Apple.xlsx&quot;)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">calculate_log_returns</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">calculate_squared_returns</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">add_inverse_index</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">volatilities</span> <span class="o">=</span> <span class="n">calculate_volatilities</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">lam</span><span class="o">=</span><span class="mf">0.97</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Volatilities:&quot;</span><span class="p">,</span> <span class="n">volatilities</span><span class="p">)</span>
<span class="n">optimized_lam</span> <span class="o">=</span> <span class="n">optimize_lam</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">apply_exponential_smoothing</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">optimized_lam</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">add_custom_column</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">optimized_lam</span><span class="p">)</span>
<span class="n">volatilities</span> <span class="o">=</span> <span class="n">calculate_volatilities</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">optimized_lam</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Optimized Lambda:&quot;</span><span class="p">,</span> <span class="n">optimized_lam</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Volatilities:&quot;</span><span class="p">,</span> <span class="n">volatilities</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_9606/451288651.py:29: FutureWarning: Setting an item of incompatible dtype is deprecated and will raise an error in a future version of pandas. Value &#39;9.122789157409887e-22&#39; has dtype incompatible with int64, please explicitly cast to a compatible dtype first.
  df.loc[row, &#39;VAR&#39;] = (1 - lam) * df.loc[row, &#39;A&#39;] + df.loc[row - 1, &#39;VAR&#39;]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Volatilities: (1.9954137419636693, 1.9975099295808703, 1.4236080485335771, 1.4047698094293233)
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_9606/451288651.py:29: FutureWarning: Setting an item of incompatible dtype is deprecated and will raise an error in a future version of pandas. Value &#39;5e-324&#39; has dtype incompatible with int64, please explicitly cast to a compatible dtype first.
  df.loc[row, &#39;VAR&#39;] = (1 - lam) * df.loc[row, &#39;A&#39;] + df.loc[row - 1, &#39;VAR&#39;]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_9606/451288651.py:29: FutureWarning: Setting an item of incompatible dtype is deprecated and will raise an error in a future version of pandas. Value &#39;5e-324&#39; has dtype incompatible with int64, please explicitly cast to a compatible dtype first.
  df.loc[row, &#39;VAR&#39;] = (1 - lam) * df.loc[row, &#39;A&#39;] + df.loc[row - 1, &#39;VAR&#39;]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_9606/451288651.py:29: FutureWarning: Setting an item of incompatible dtype is deprecated and will raise an error in a future version of pandas. Value &#39;3.5e-323&#39; has dtype incompatible with int64, please explicitly cast to a compatible dtype first.
  df.loc[row, &#39;VAR&#39;] = (1 - lam) * df.loc[row, &#39;A&#39;] + df.loc[row - 1, &#39;VAR&#39;]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_9606/451288651.py:29: FutureWarning: Setting an item of incompatible dtype is deprecated and will raise an error in a future version of pandas. Value &#39;3.5e-323&#39; has dtype incompatible with int64, please explicitly cast to a compatible dtype first.
  df.loc[row, &#39;VAR&#39;] = (1 - lam) * df.loc[row, &#39;A&#39;] + df.loc[row - 1, &#39;VAR&#39;]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_9606/451288651.py:29: FutureWarning: Setting an item of incompatible dtype is deprecated and will raise an error in a future version of pandas. Value &#39;3.5e-323&#39; has dtype incompatible with int64, please explicitly cast to a compatible dtype first.
  df.loc[row, &#39;VAR&#39;] = (1 - lam) * df.loc[row, &#39;A&#39;] + df.loc[row - 1, &#39;VAR&#39;]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Optimized Lambda: 0.07814955675784346
Volatilities: (1.9954137419636693, 1.9975099295808703, 0.5010558278130102, 0.5006395385975295)
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_9606/451288651.py:29: FutureWarning: Setting an item of incompatible dtype is deprecated and will raise an error in a future version of pandas. Value &#39;3.5e-323&#39; has dtype incompatible with int64, please explicitly cast to a compatible dtype first.
  df.loc[row, &#39;VAR&#39;] = (1 - lam) * df.loc[row, &#39;A&#39;] + df.loc[row - 1, &#39;VAR&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">norm</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">minimize</span>

<span class="k">def</span> <span class="nf">fetch_data</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">end_date</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">calculate_log_returns</span><span class="p">(</span><span class="n">close_prices</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">close_prices</span> <span class="o">/</span> <span class="n">close_prices</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">calculate_ewma_volatility</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="n">lambda_factor</span><span class="p">):</span>
    <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">returns</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">weights</span> <span class="o">=</span> <span class="n">lambda_factor</span><span class="o">**</span><span class="n">weights</span>
    <span class="n">weighted_squared_returns</span> <span class="o">=</span> <span class="p">(</span><span class="n">returns</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">weights</span>
    <span class="n">smoothed_variance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">weighted_squared_returns</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">lambda_factor</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">lambda_factor</span><span class="o">**</span><span class="nb">len</span><span class="p">(</span><span class="n">returns</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">smoothed_variance</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">calculate_var_parametric</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="n">investment_value</span><span class="p">,</span> <span class="n">confidence_level</span><span class="p">,</span> <span class="n">lambda_factor</span><span class="p">):</span>
    <span class="n">z_score</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">ppf</span><span class="p">(</span><span class="n">confidence_level</span><span class="p">)</span>
    <span class="n">ewma_volatility_t1</span> <span class="o">=</span> <span class="n">calculate_ewma_volatility</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="n">lambda_factor</span><span class="p">)</span>
    <span class="k">return</span> <span class="o">-</span><span class="n">investment_value</span> <span class="o">*</span> <span class="n">z_score</span> <span class="o">*</span> <span class="n">ewma_volatility_t1</span>

<span class="k">def</span> <span class="nf">calculate_var_non_parametric</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="n">investment_value</span><span class="p">,</span> <span class="n">confidence_level</span><span class="p">):</span>
    <span class="n">sorted_returns</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">returns</span><span class="p">)</span>
    <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">confidence_level</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">sorted_returns</span><span class="p">))</span>
    <span class="k">return</span> <span class="o">-</span><span class="n">investment_value</span> <span class="o">*</span> <span class="n">sorted_returns</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">simulate_monte_carlo</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="n">investment_value</span><span class="p">,</span> <span class="n">num_simulations</span><span class="p">,</span> <span class="n">lambda_factor</span><span class="p">):</span>
    <span class="n">simulated_returns</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">returns</span><span class="p">),</span> <span class="n">calculate_ewma_volatility</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="n">lambda_factor</span><span class="p">),</span> <span class="n">num_simulations</span><span class="p">)</span>
    <span class="n">sorted_simulated_returns</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">simulated_returns</span><span class="p">)</span>
    <span class="n">confidence_level_index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">0.95</span> <span class="o">*</span> <span class="n">num_simulations</span><span class="p">)</span>
    <span class="k">return</span> <span class="o">-</span><span class="n">investment_value</span> <span class="o">*</span> <span class="n">sorted_simulated_returns</span><span class="p">[</span><span class="n">confidence_level_index</span><span class="p">]</span>

<span class="c1"># Example usage</span>
<span class="n">ticker</span> <span class="o">=</span> <span class="s1">&#39;AAPL&#39;</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="s1">&#39;2020-01-01&#39;</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="s1">&#39;2022-01-01&#39;</span>
<span class="n">investment_value</span> <span class="o">=</span> <span class="mi">20000000</span>
<span class="n">confidence_level</span> <span class="o">=</span> <span class="mf">0.95</span>
<span class="n">lambda_factor</span> <span class="o">=</span> <span class="mf">0.94</span>

<span class="n">close_prices</span> <span class="o">=</span> <span class="n">fetch_data</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>
<span class="n">returns</span> <span class="o">=</span> <span class="n">calculate_log_returns</span><span class="p">(</span><span class="n">close_prices</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># Calculate VaR</span>
<span class="n">var_parametric</span> <span class="o">=</span> <span class="n">calculate_var_parametric</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="n">investment_value</span><span class="p">,</span> <span class="n">confidence_level</span><span class="p">,</span> <span class="n">lambda_factor</span><span class="p">)</span>
<span class="n">var_non_parametric</span> <span class="o">=</span> <span class="n">calculate_var_non_parametric</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="n">investment_value</span><span class="p">,</span> <span class="n">confidence_level</span><span class="p">)</span>
<span class="n">var_monte_carlo</span> <span class="o">=</span> <span class="n">simulate_monte_carlo</span><span class="p">(</span><span class="n">returns</span><span class="p">,</span> <span class="n">investment_value</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">lambda_factor</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;VaR Parametric:&quot;</span><span class="p">,</span> <span class="n">var_parametric</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;VaR Non-Parametric:&quot;</span><span class="p">,</span> <span class="n">var_non_parametric</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;VaR Monte Carlo:&quot;</span><span class="p">,</span> <span class="n">var_monte_carlo</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[*********************100%%**********************]  1 of 1 completed
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>VaR Parametric: -551348.4152567702
VaR Non-Parametric: 684822.3315781849
VaR Monte Carlo: -588822.2925362863
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="analisis-de-valor-en-riesgo-var-utilizando-diferentes-metodos">
<h1><span class="section-number">58. </span>Análisis de Valor en Riesgo (VaR) Utilizando Diferentes Métodos<a class="headerlink" href="#analisis-de-valor-en-riesgo-var-utilizando-diferentes-metodos" title="Link to this heading">#</a></h1>
<section id="introduccion">
<h2><span class="section-number">58.1. </span>Introducción<a class="headerlink" href="#introduccion" title="Link to this heading">#</a></h2>
<p>El Valor en Riesgo (VaR) es una métrica financiera que mide y cuantifica el nivel de riesgo financiero dentro de una firma o cartera durante un período específico. Este análisis se centra en tres métodos de cálculo del VaR:</p>
<ol class="arabic simple">
<li><p><strong>VaR Paramétrico</strong>: Utiliza la distribución normal de los retornos y la volatilidad histórica para estimar el riesgo.</p></li>
<li><p><strong>VaR No Paramétrico</strong>: Basa su cálculo en el ordenamiento de los retornos históricos, sin asumir una distribución específica.</p></li>
<li><p><strong>VaR Montecarlo</strong>: Simula un gran número de escenarios de posibles resultados futuros basados en las distribuciones estadísticas de los retornos.</p></li>
</ol>
<section id="metodos-y-aplicaciones">
<h3><span class="section-number">58.1.1. </span>Métodos y Aplicaciones<a class="headerlink" href="#metodos-y-aplicaciones" title="Link to this heading">#</a></h3>
<section id="var-parametrico">
<h4><span class="section-number">58.1.1.1. </span>VaR Paramétrico<a class="headerlink" href="#var-parametrico" title="Link to this heading">#</a></h4>
<p>El VaR paramétrico se basa en la premisa de que los retornos de los activos siguen una distribución normal. Se calcula utilizando la media y la desviación estándar de los retornos, ajustados por un valor z correspondiente al nivel de confianza deseado.</p>
<p><strong>Ecuación Matemática</strong>:
$<span class="math notranslate nohighlight">\( \text{VaR} = -(\mu + z \times \sigma) \times \text{Inversión Total} \)</span>$
donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\mu \)</span>es la media de los retornos (usualmente asumida como valro cercano a cero para simplificar),</p></li>
<li><p><span class="math notranslate nohighlight">\( \sigma \)</span> es la desviación estándar de los retornos,</p></li>
<li><p><span class="math notranslate nohighlight">\( z \)</span> es el valor z de la distribución normal estándar para el nivel de confianza deseado.</p></li>
</ul>
<p><strong>Aplicación</strong>: Este método es adecuado para carteras grandes donde se requiere simplicidad y eficiencia computacional. Se utiliza ampliamente en la gestión del riesgo financiero y el cumplimiento regulatorio.</p>
</section>
<section id="var-no-parametrico">
<h4><span class="section-number">58.1.1.2. </span>VaR No Paramétrico<a class="headerlink" href="#var-no-parametrico" title="Link to this heading">#</a></h4>
<p>El VaR no paramétrico se calcula directamente de la distribución histórica de los retornos sin asumir una forma funcional específica. Este método es efectivo para modelar distribuciones con colas pesadas o sesgos significativos.</p>
<p><strong>Ecuación Matemática</strong>:
$<span class="math notranslate nohighlight">\( \text{VaR} = -\text{quantil}_{(1-\text{nivel de confianza})}(\text{Retornos}) \times \text{Inversión Total} \)</span>$</p>
<p><strong>Aplicación</strong>: Es utilizado cuando las características estadísticas de los datos históricos son importantes para la toma de decisiones de riesgo. Proporciona una medida más realista del riesgo en mercados volátiles o no estandarizados.</p>
</section>
<section id="var-montecarlo">
<h4><span class="section-number">58.1.1.3. </span>VaR Montecarlo<a class="headerlink" href="#var-montecarlo" title="Link to this heading">#</a></h4>
<p>El método de Montecarlo utiliza simulaciones de los retornos de los activos basadas en sus propiedades estadísticas para construir una distribución de posibles resultados futuros y determinar el VaR.</p>
<p><strong>Ecuación Matemática</strong>:
$<span class="math notranslate nohighlight">\( \text{VaR} = -\text{quantil}_{(1-\text{nivel de confianza})}(\text{Retornos Simulados}) \times \text{Inversión Total} \)</span>$
donde los retornos simulados se generan a partir de la media y la volatilidad de los retornos históricos.</p>
<p><strong>Aplicación</strong>: Es útil para analizar carteras complejas que incluyen una variedad de instrumentos financieros con interacciones y correlaciones complicadas. Este método es intensivo en computación pero proporciona una flexibilidad y un nivel de detalle que los métodos paramétrico y no paramétrico no pueden alcanzar.</p>
</section>
</section>
</section>
<section id="resultados">
<h2><span class="section-number">58.2. </span>Resultados<a class="headerlink" href="#resultados" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><strong>VaR Paramétrico</strong>: -$551,348.42</p>
<ul>
<li><p>Indica que, bajo condiciones normales de mercado y con un 95% de confianza, se espera que la mayor pérdida no exceda $551,348.42 en un día.</p></li>
</ul>
</li>
<li><p><strong>VaR No Paramétrico</strong>: $684,822.33</p>
<ul>
<li><p>Sugiere que, basándose exclusivamente en los retornos históricos, la peor pérdida esperada en el 5% de los casos es de $684,822.33 en un día.</p></li>
</ul>
</li>
<li><p><strong>VaR Montecarlo</strong>: -$578,475.00</p>
<ul>
<li><p>Muestra que, según las simulaciones de posibles futuros retornos de mercado, la pérdida máxima esperada, con un 95% de confianza, es de $578,475.00 en un día.</p></li>
</ul>
</li>
</ul>
</section>
<section id="interpretacion-de-los-resultados">
<h2><span class="section-number">58.3. </span>Interpretación de los Resultados<a class="headerlink" href="#interpretacion-de-los-resultados" title="Link to this heading">#</a></h2>
<p>Los resultados muestran variaciones significativas entre los tres métodos, reflejando diferentes suposiciones y enfoques analíticos:</p>
<ul class="simple">
<li><p>El <strong>VaR Paramétrico</strong> y el <strong>VaR Montecarlo</strong> mostraron pérdidas máximas similares, lo que puede indicar que los supuestos sobre la normalidad de los datos no son tan desviados.</p></li>
<li><p>El <strong>VaR No Paramétrico</strong>, sin embargo, indicó una posible pérdida mayor, lo que podría sugerir que los datos históricos incluyen eventos extremos que los modelos paramétricos y de simulación no capturan completamente.</p></li>
</ul>
<p>Estas diferencias subrayan la importancia de seleccionar el método de VaR apropiado basado en la naturaleza de la cartera, la tolerancia al riesgo de la firma, y las características de los datos de mercado disponibles.</p>
<section id="introduccion-a-la-frontera-eficiente">
<h3><span class="section-number">58.3.1. </span>Introducción a la Frontera Eficiente<a class="headerlink" href="#introduccion-a-la-frontera-eficiente" title="Link to this heading">#</a></h3>
<section id="historia">
<h4><span class="section-number">58.3.1.1. </span>Historia<a class="headerlink" href="#historia" title="Link to this heading">#</a></h4>
<p>El concepto de la Frontera Eficiente fue introducido por Harry Markowitz en 1952, como parte de su teoría de selección de carteras. Esta teoría forma la base de la moderna teoría de carteras y proporciona un marco matemático para el ensamblaje de una cartera de activos de tal manera que para un nivel dado de riesgo, se maximiza el retorno esperado. La Frontera Eficiente, o “frontera de Markowitz”, ha revolucionado la forma en que los inversores piensan sobre el riesgo y el retorno.</p>
</section>
<section id="concepto-matematico-de-dominancia">
<h4><span class="section-number">58.3.1.2. </span>Concepto Matemático de Dominancia<a class="headerlink" href="#concepto-matematico-de-dominancia" title="Link to this heading">#</a></h4>
<p>En términos de selección de carteras, un portafolio domina a otro si ofrece mayor retorno por el mismo nivel de riesgo o menos riesgo por el mismo nivel de retorno. La Frontera Eficiente consiste en el conjunto de todas las carteras posibles que no son dominadas por ninguna otra cartera en términos de retorno y riesgo. Matemáticamente, esto se traduce en optimizar la siguiente función para cada nivel de riesgo posible:</p>
<div class="math notranslate nohighlight">
\[ \text{maximizar } \mu_p - \lambda \sigma_p^2 \]</div>
<p>donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\( \mu_p \)</span> es el retorno esperado de la cartera,</p></li>
<li><p><span class="math notranslate nohighlight">\( \sigma_p^2 \)</span> es la varianza (riesgo) de la cartera,</p></li>
<li><p><span class="math notranslate nohighlight">\( \lambda \)</span> es el parámetro de aversión al riesgo del inversor.</p></li>
</ul>
</section>
<section id="ejemplo-con-10-acciones-usando-yahoofinance-y-calculos-en-python">
<h4><span class="section-number">58.3.1.3. </span>Ejemplo con 10 Acciones Usando YahooFinance y Cálculos en Python<a class="headerlink" href="#ejemplo-con-10-acciones-usando-yahoofinance-y-calculos-en-python" title="Link to this heading">#</a></h4>
<p>A continuación, proporciono un ejemplo práctico donde seleccionamos 10 acciones, calculamos sus retornos esperados y varianzas, y construimos la frontera eficiente.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Lista de acciones actualizada</span>
<span class="n">tickers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="s1">&#39;GOOGL&#39;</span><span class="p">,</span> <span class="s1">&#39;MSFT&#39;</span><span class="p">,</span> <span class="s1">&#39;AMZN&#39;</span><span class="p">,</span> <span class="s1">&#39;META&#39;</span><span class="p">,</span> <span class="s1">&#39;BRK-B&#39;</span><span class="p">,</span> <span class="s1">&#39;JPM&#39;</span><span class="p">,</span> <span class="s1">&#39;V&#39;</span><span class="p">,</span> <span class="s1">&#39;JNJ&#39;</span><span class="p">,</span> <span class="s1">&#39;XOM&#39;</span><span class="p">]</span>

<span class="c1"># Descargar datos históricos</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">tickers</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2022-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">)[</span><span class="s1">&#39;Adj Close&#39;</span><span class="p">]</span>

<span class="c1"># Verificar y manejar datos faltantes</span>
<span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;ffill&#39;</span><span class="p">)</span>  <span class="c1"># Llenar valores faltantes hacia adelante</span>

<span class="c1"># Calcular retornos diarios y manejar posibles datos faltantes después del llenado</span>
<span class="n">returns</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># Calcular retornos esperados y covarianza</span>
<span class="n">mean_returns</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">*</span> <span class="mi">252</span>  <span class="c1"># Asumiendo 252 días de trading al año</span>
<span class="n">cov_matrix</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">cov</span><span class="p">()</span> <span class="o">*</span> <span class="mi">252</span>

<span class="c1"># Simular carteras aleatorias</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">num_portfolios</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="n">num_portfolios</span><span class="p">))</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_portfolios</span><span class="p">):</span>
    <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tickers</span><span class="p">))</span>
    <span class="n">weights</span> <span class="o">/=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">weights</span><span class="p">)</span>
    <span class="n">portfolio_return</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">mean_returns</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>
    <span class="n">portfolio_std_dev</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">weights</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">cov_matrix</span><span class="p">,</span> <span class="n">weights</span><span class="p">)))</span>
    <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">portfolio_std_dev</span>
    <span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">portfolio_return</span>
    <span class="n">results</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">portfolio_return</span> <span class="o">/</span> <span class="n">portfolio_std_dev</span>

<span class="c1"># Graficar la frontera eficiente</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">,:],</span> <span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">,:],</span> <span class="n">c</span><span class="o">=</span><span class="n">results</span><span class="p">[</span><span class="mi">2</span><span class="p">,:],</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;YlGnBu&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sharpe Ratio&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Frontera Eficiente de 10 Acciones&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Volatilidad (Desviación Estándar)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Retorno Esperado&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[                       0%%                      ]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********            20%%                      ]  2 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**************        30%%                      ]  3 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[*******************   40%%                      ]  4 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************50%%                      ]  5 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************60%%***                   ]  6 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************70%%********              ]  7 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************80%%************          ]  8 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************90%%*****************     ]  9 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[*********************100%%**********************]  10 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<img alt="_images/33f99fcf6ea6da1f7aa46412cb42535867a869a3653ef49bd058f419934e6090.png" src="_images/33f99fcf6ea6da1f7aa46412cb42535867a869a3653ef49bd058f419934e6090.png" />
</div>
</div>
</section>
</section>
<section id="conceptos-matematicos-para-el-calculo-de-volatilidad-y-retorno-esperado">
<h3><span class="section-number">58.3.2. </span>Conceptos Matemáticos para el Cálculo de Volatilidad y Retorno Esperado<a class="headerlink" href="#conceptos-matematicos-para-el-calculo-de-volatilidad-y-retorno-esperado" title="Link to this heading">#</a></h3>
<p>En la gestión de inversiones y la teoría de carteras, los conceptos de volatilidad y retorno esperado son fundamentales para la evaluación y la optimización de carteras. A continuación, se detallan las bases matemáticas de estos conceptos y cómo se aplican en el contexto financiero.</p>
<section id="retorno-esperado">
<h4><span class="section-number">58.3.2.1. </span>Retorno Esperado<a class="headerlink" href="#retorno-esperado" title="Link to this heading">#</a></h4>
<p>El retorno esperado de un activo financiero o una cartera es una estimación del promedio de los posibles retornos futuros del activo o cartera, ponderado por sus probabilidades. Matemáticamente, se calcula como el promedio ponderado de todos los posibles resultados, donde los pesos corresponden a la probabilidad de cada resultado.</p>
<p><strong>Fórmula para el Retorno Esperado de un Activo Individual</strong>:
$<span class="math notranslate nohighlight">\( E[R] = \sum_{i=1}^n p_i \cdot r_i \)</span>$
donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\( E[R] \)</span> es el retorno esperado.</p></li>
<li><p><span class="math notranslate nohighlight">\( p_i \)</span> es la probabilidad del i-ésimo retorno.</p></li>
<li><p><span class="math notranslate nohighlight">\( r_i \)</span> es el i-ésimo posible retorno.</p></li>
</ul>
<p>En la práctica, cuando se utilizan datos históricos, el retorno esperado se suele calcular como el promedio aritmético de los retornos pasados:</p>
<div class="math notranslate nohighlight">
\[ E[R] = \frac{1}{n} \sum_{i=1}^n r_i \]</div>
<p>donde <span class="math notranslate nohighlight">\( r_i \)</span> son los retornos históricos y <span class="math notranslate nohighlight">\( n \)</span> es el número de observaciones.</p>
<p>Para una cartera de activos, el retorno esperado es el promedio ponderado de los retornos esperados de los activos individuales, donde los pesos son las proporciones del valor total de la cartera invertidas en cada activo.</p>
<p><strong>Fórmula para el Retorno Esperado de una Cartera</strong>:
$<span class="math notranslate nohighlight">\( E[R_p] = \sum_{i=1}^k w_i \cdot E[R_i] \)</span>$
donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\( E[R_p] \)</span> es el retorno esperado de la cartera.</p></li>
<li><p><span class="math notranslate nohighlight">\( w_i \)</span> es la proporción del capital total invertido en el i-ésimo activo.</p></li>
<li><p><span class="math notranslate nohighlight">\( E[R_i] \)</span> es el retorno esperado del i-ésimo activo.</p></li>
</ul>
</section>
<section id="volatilidad">
<h4><span class="section-number">58.3.2.2. </span>Volatilidad<a class="headerlink" href="#volatilidad" title="Link to this heading">#</a></h4>
<p>La volatilidad es una medida estadística de la dispersión de los retornos para un activo o cartera de inversión. Representa el riesgo asociado a la inversión y se calcula generalmente como la desviación estándar de los retornos.</p>
<p><strong>Fórmula para la Volatilidad de un Activo Individual</strong>:
$<span class="math notranslate nohighlight">\( \sigma = \sqrt{\frac{1}{n-1} \sum_{i=1}^n (r_i - E[R])^2} \)</span>$
donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\( \sigma \)</span> es la volatilidad del activo.</p></li>
<li><p><span class="math notranslate nohighlight">\( r_i \)</span> son los retornos históricos.</p></li>
<li><p><span class="math notranslate nohighlight">\( E[R] \)</span> es el retorno esperado del activo.</p></li>
<li><p><span class="math notranslate nohighlight">\( n \)</span> es el número de observaciones.</p></li>
</ul>
<p>Para una cartera de activos, la volatilidad no solo depende de la volatilidad de los activos individuales, sino también de la correlación entre los retornos de esos activos.</p>
<p><strong>Fórmula para la Volatilidad de una Cartera</strong>:
$<span class="math notranslate nohighlight">\( \sigma_p = \sqrt{\sum_{i=1}^k \sum_{j=1}^k w_i w_j \sigma_{ij}} \)</span>$
donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\( \sigma_p \)</span> es la volatilidad de la cartera.</p></li>
<li><p><span class="math notranslate nohighlight">\( w_i \)</span>, <span class="math notranslate nohighlight">\( w_j \)</span> son las proporciones del capital total invertido en los activos i y j.</p></li>
<li><p><span class="math notranslate nohighlight">\( \sigma_{ij} \)</span> es la covarianza entre los retornos de los activos i y j.</p></li>
</ul>
<p>Estas fórmulas forman la base para el análisis cuantitativo en la selección y gestión de carteras, permitiendo a los inversores hacer evaluaciones informadas sobre el compromiso entre riesgo y retorno.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">def</span> <span class="nf">identify_non_dominated_portfolios</span><span class="p">(</span><span class="n">volatilities</span><span class="p">,</span> <span class="n">returns</span><span class="p">):</span>
    <span class="c1"># Ordenar las carteras por menor volatilidad</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">volatilities</span><span class="p">)</span>
    <span class="n">sorted_volatilities</span> <span class="o">=</span> <span class="n">volatilities</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
    <span class="n">sorted_returns</span> <span class="o">=</span> <span class="n">returns</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>

    <span class="c1"># Lista para mantener los índices de las carteras no dominadas</span>
    <span class="n">non_dominated_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">max_return_so_far</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-inf&#39;</span><span class="p">)</span>

    <span class="c1"># Identificar carteras no dominadas</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sorted_returns</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">sorted_returns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_return_so_far</span><span class="p">:</span>
            <span class="n">non_dominated_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">max_return_so_far</span> <span class="o">=</span> <span class="n">sorted_returns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">non_dominated_indices</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plot_portfolios</span><span class="p">(</span><span class="n">volatilities</span><span class="p">,</span> <span class="n">returns</span><span class="p">,</span> <span class="n">non_dominated_indices</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">volatilities</span><span class="p">,</span> <span class="n">returns</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">returns</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;YlGnBu&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Dominated Portfolios&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">volatilities</span><span class="p">[</span><span class="n">non_dominated_indices</span><span class="p">],</span> <span class="n">returns</span><span class="p">[</span><span class="n">non_dominated_indices</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Non-dominated Portfolios&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Expected Return&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Portfolio Efficient Frontier&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Volatility (Standard Deviation)&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Expected Return&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Lista de acciones actualizada</span>
<span class="n">tickers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="s1">&#39;GOOGL&#39;</span><span class="p">,</span> <span class="s1">&#39;MSFT&#39;</span><span class="p">,</span> <span class="s1">&#39;AMZN&#39;</span><span class="p">,</span> <span class="s1">&#39;META&#39;</span><span class="p">,</span> <span class="s1">&#39;BRK-B&#39;</span><span class="p">,</span> <span class="s1">&#39;JPM&#39;</span><span class="p">,</span> <span class="s1">&#39;V&#39;</span><span class="p">,</span> <span class="s1">&#39;JNJ&#39;</span><span class="p">,</span> <span class="s1">&#39;XOM&#39;</span><span class="p">]</span>

<span class="c1"># Descargar datos históricos</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">tickers</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2022-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">)[</span><span class="s1">&#39;Adj Close&#39;</span><span class="p">]</span>

<span class="c1"># Verificar y manejar datos faltantes</span>
<span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;ffill&#39;</span><span class="p">)</span>  <span class="c1"># Llenar valores faltantes hacia adelante</span>

<span class="c1"># Calcular retornos diarios y manejar posibles datos faltantes después del llenado</span>
<span class="n">returns</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># Calcular retornos esperados y volatilidades tradicionales</span>
<span class="n">mean_returns</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">*</span> <span class="mi">252</span>  <span class="c1"># Asumiendo 252 días de trading al año</span>
<span class="n">volatilities</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">252</span><span class="p">)</span>  <span class="c1"># Volatilidades anuales</span>

<span class="c1"># Construir y evaluar carteras</span>
<span class="n">num_portfolios</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">tickers</span><span class="p">),</span> <span class="n">num_portfolios</span><span class="p">))</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_portfolios</span><span class="p">):</span>
    <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tickers</span><span class="p">))</span>
    <span class="n">weights</span> <span class="o">/=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">weights</span><span class="p">)</span>
    <span class="n">portfolio_return</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">mean_returns</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span>
    <span class="n">portfolio_std_dev</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">weights</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">returns</span><span class="o">.</span><span class="n">cov</span><span class="p">()</span> <span class="o">*</span> <span class="mi">252</span><span class="p">,</span> <span class="n">weights</span><span class="p">)))</span>
    <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">portfolio_std_dev</span>
    <span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">portfolio_return</span>
    <span class="n">results</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">portfolio_return</span> <span class="o">/</span> <span class="n">portfolio_std_dev</span>  <span class="c1"># Ratio de Sharpe</span>
    <span class="n">results</span><span class="p">[</span><span class="mi">3</span><span class="p">:,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">weights</span>

<span class="c1"># Identificar carteras no dominadas (frontera eficiente)</span>
<span class="n">non_dominated_indices</span> <span class="o">=</span> <span class="n">identify_non_dominated_portfolios</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="c1"># Crear DataFrame con los resultados de las carteras no dominadas</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Volatility&#39;</span><span class="p">,</span> <span class="s1">&#39;Return&#39;</span><span class="p">,</span> <span class="s1">&#39;Sharpe Ratio&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">tickers</span>
<span class="n">non_dominated_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">[:,</span> <span class="n">non_dominated_indices</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="c1"># Graficar la frontera eficiente</span>
<span class="n">plot_portfolios</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">non_dominated_indices</span><span class="p">)</span>

<span class="c1"># Devolver el DataFrame con las carteras no dominadas</span>
<span class="n">non_dominated_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[                       0%%                      ]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[                       0%%                      ]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**************        30%%                      ]  3 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[*******************   40%%                      ]  4 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************50%%                      ]  5 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************60%%***                   ]  6 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************60%%***                   ]  6 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************80%%************          ]  8 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************90%%*****************     ]  9 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[*********************100%%**********************]  10 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<img alt="_images/9966b465254ced80e4c868d0b335fb550ce22a298bc888dc7010a973a3d6584a.png" src="_images/9966b465254ced80e4c868d0b335fb550ce22a298bc888dc7010a973a3d6584a.png" />
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Volatility</th>
      <th>Return</th>
      <th>Sharpe Ratio</th>
      <th>AAPL</th>
      <th>GOOGL</th>
      <th>MSFT</th>
      <th>AMZN</th>
      <th>META</th>
      <th>BRK-B</th>
      <th>JPM</th>
      <th>V</th>
      <th>JNJ</th>
      <th>XOM</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.203170</td>
      <td>0.030021</td>
      <td>0.147763</td>
      <td>0.079261</td>
      <td>0.010269</td>
      <td>0.076637</td>
      <td>0.081815</td>
      <td>0.266945</td>
      <td>0.190587</td>
      <td>0.023984</td>
      <td>0.039741</td>
      <td>0.045699</td>
      <td>0.185062</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.209579</td>
      <td>0.045326</td>
      <td>0.216271</td>
      <td>0.002157</td>
      <td>0.015741</td>
      <td>0.219921</td>
      <td>0.140978</td>
      <td>0.216238</td>
      <td>0.029625</td>
      <td>0.007454</td>
      <td>0.126631</td>
      <td>0.040841</td>
      <td>0.200415</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.211465</td>
      <td>0.082386</td>
      <td>0.389596</td>
      <td>0.060715</td>
      <td>0.016767</td>
      <td>0.086434</td>
      <td>0.050220</td>
      <td>0.195673</td>
      <td>0.064861</td>
      <td>0.013654</td>
      <td>0.012622</td>
      <td>0.291632</td>
      <td>0.207422</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.213740</td>
      <td>0.111629</td>
      <td>0.522267</td>
      <td>0.076328</td>
      <td>0.013970</td>
      <td>0.058633</td>
      <td>0.015595</td>
      <td>0.158178</td>
      <td>0.198020</td>
      <td>0.015080</td>
      <td>0.030542</td>
      <td>0.163890</td>
      <td>0.269764</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">arch</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: arch in /usr/local/python/3.10.13/lib/python3.10/site-packages (7.0.0)
Requirement already satisfied: numpy&gt;=1.22.3 in /home/codespace/.local/lib/python3.10/site-packages (from arch) (1.26.4)
Requirement already satisfied: scipy&gt;=1.8 in /home/codespace/.local/lib/python3.10/site-packages (from arch) (1.13.0)
Requirement already satisfied: pandas&gt;=1.4 in /home/codespace/.local/lib/python3.10/site-packages (from arch) (2.2.2)
Requirement already satisfied: statsmodels&gt;=0.12 in /usr/local/python/3.10.13/lib/python3.10/site-packages (from arch) (0.14.2)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: python-dateutil&gt;=2.8.2 in /home/codespace/.local/lib/python3.10/site-packages (from pandas&gt;=1.4-&gt;arch) (2.9.0.post0)
Requirement already satisfied: pytz&gt;=2020.1 in /home/codespace/.local/lib/python3.10/site-packages (from pandas&gt;=1.4-&gt;arch) (2024.1)
Requirement already satisfied: tzdata&gt;=2022.7 in /home/codespace/.local/lib/python3.10/site-packages (from pandas&gt;=1.4-&gt;arch) (2024.1)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: patsy&gt;=0.5.6 in /usr/local/python/3.10.13/lib/python3.10/site-packages (from statsmodels&gt;=0.12-&gt;arch) (0.5.6)
Requirement already satisfied: packaging&gt;=21.3 in /home/codespace/.local/lib/python3.10/site-packages (from statsmodels&gt;=0.12-&gt;arch) (24.0)
Requirement already satisfied: six in /home/codespace/.local/lib/python3.10/site-packages (from patsy&gt;=0.5.6-&gt;statsmodels&gt;=0.12-&gt;arch) (1.16.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Note: you may need to restart the kernel to use updated packages.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>
<span class="kn">from</span> <span class="nn">arch</span> <span class="kn">import</span> <span class="n">arch_model</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Lista de acciones actualizada</span>
<span class="n">tickers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="s1">&#39;GOOGL&#39;</span><span class="p">,</span> <span class="s1">&#39;MSFT&#39;</span><span class="p">,</span> <span class="s1">&#39;AMZN&#39;</span><span class="p">,</span> <span class="s1">&#39;META&#39;</span><span class="p">,</span> <span class="s1">&#39;BRK-B&#39;</span><span class="p">,</span> <span class="s1">&#39;JPM&#39;</span><span class="p">,</span> <span class="s1">&#39;V&#39;</span><span class="p">,</span> <span class="s1">&#39;JNJ&#39;</span><span class="p">,</span> <span class="s1">&#39;XOM&#39;</span><span class="p">]</span>

<span class="c1"># Descargar datos históricos</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">tickers</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2022-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">)[</span><span class="s1">&#39;Adj Close&#39;</span><span class="p">]</span>

<span class="c1"># Verificar y manejar datos faltantes</span>
<span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;ffill&#39;</span><span class="p">)</span>  <span class="c1"># Llenar valores faltantes hacia adelante</span>

<span class="c1"># Calcular retornos diarios y manejar posibles datos faltantes después del llenado</span>
<span class="n">returns</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># Ajustar un modelo GARCH para cada acción y estimar volatilidades futuras</span>
<span class="n">volatilities</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">ticker</span> <span class="ow">in</span> <span class="n">tickers</span><span class="p">:</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">arch_model</span><span class="p">(</span><span class="n">returns</span><span class="p">[</span><span class="n">ticker</span><span class="p">],</span> <span class="n">vol</span><span class="o">=</span><span class="s1">&#39;Garch&#39;</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">disp</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
    <span class="n">volatilities</span><span class="p">[</span><span class="n">ticker</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">forecast</span><span class="p">(</span><span class="n">horizon</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">variance</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:][</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mf">0.5</span>

<span class="c1"># Simular retornos futuros usando las volatilidades estimadas por GARCH</span>
<span class="n">simulated_returns</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">ticker</span> <span class="ow">in</span> <span class="n">tickers</span><span class="p">:</span>
    <span class="n">mean_return</span> <span class="o">=</span> <span class="n">returns</span><span class="p">[</span><span class="n">ticker</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">simulated_returns</span><span class="p">[</span><span class="n">ticker</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">mean_return</span><span class="p">,</span> <span class="n">volatilities</span><span class="p">[</span><span class="n">ticker</span><span class="p">],</span> <span class="mi">252</span><span class="p">)</span>

<span class="c1"># Descargar datos históricos del bono del Tesoro de EE. UU. a 10 años</span>
<span class="n">ticker</span> <span class="o">=</span> <span class="s2">&quot;^TNX&quot;</span>
<span class="n">rate</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2022-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">)</span>

<span class="c1"># Extraer la última tasa disponible (rendimiento en porcentaje)</span>
<span class="n">risk_free_rate</span> <span class="o">=</span> <span class="n">rate</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="n">risk_free_rate</span><span class="p">)</span>
<span class="c1"># Construir y evaluar carteras</span>
<span class="n">num_portfolios</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">tickers</span><span class="p">),</span> <span class="n">num_portfolios</span><span class="p">))</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_portfolios</span><span class="p">):</span>
    <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tickers</span><span class="p">))</span>
    <span class="n">weights</span> <span class="o">/=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">weights</span><span class="p">)</span>
    <span class="n">portfolio_return</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">simulated_returns</span><span class="p">[</span><span class="n">ticker</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">ticker</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tickers</span><span class="p">))</span>
    <span class="n">portfolio_std_dev</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">weights</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cov</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">simulated_returns</span><span class="p">[</span><span class="n">ticker</span><span class="p">]</span> <span class="k">for</span> <span class="n">ticker</span> <span class="ow">in</span> <span class="n">tickers</span><span class="p">])),</span> <span class="n">weights</span><span class="p">)))</span>
    <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">portfolio_std_dev</span>
    <span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">portfolio_return</span>
    <span class="n">results</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">portfolio_return</span> <span class="o">-</span> <span class="n">risk_free_rate</span><span class="p">)</span> <span class="o">/</span> <span class="n">portfolio_std_dev</span>  <span class="c1"># Ratio de Sharpe</span>
    <span class="n">results</span><span class="p">[</span><span class="mi">3</span><span class="p">:,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">weights</span>

<span class="c1"># Identificar carteras no dominadas (frontera eficiente)</span>
<span class="k">def</span> <span class="nf">identify_non_dominated_portfolios</span><span class="p">(</span><span class="n">volatilities</span><span class="p">,</span> <span class="n">returns</span><span class="p">):</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">volatilities</span><span class="p">)</span>
    <span class="n">sorted_volatilities</span> <span class="o">=</span> <span class="n">volatilities</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
    <span class="n">sorted_returns</span> <span class="o">=</span> <span class="n">returns</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
    <span class="n">non_dominated_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">max_return_so_far</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-inf&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sorted_returns</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">sorted_returns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_return_so_far</span><span class="p">:</span>
            <span class="n">non_dominated_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">indices</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">max_return_so_far</span> <span class="o">=</span> <span class="n">sorted_returns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">non_dominated_indices</span><span class="p">)</span>

<span class="n">non_dominated_indices</span> <span class="o">=</span> <span class="n">identify_non_dominated_portfolios</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="c1"># Crear DataFrame con los resultados de las carteras no dominadas</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Volatility&#39;</span><span class="p">,</span> <span class="s1">&#39;Return&#39;</span><span class="p">,</span> <span class="s1">&#39;Sharpe Ratio&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">tickers</span>
<span class="n">non_dominated_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">[:,</span> <span class="n">non_dominated_indices</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="c1"># Graficar la frontera eficiente</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">,:],</span> <span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">,:],</span> <span class="n">c</span><span class="o">=</span><span class="n">results</span><span class="p">[</span><span class="mi">2</span><span class="p">,:],</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;YlGnBu&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">non_dominated_indices</span><span class="p">],</span> <span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">non_dominated_indices</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Efficient Frontier&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sharpe Ratio&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Frontera Eficiente Utilizando Volatilidades GARCH&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Volatilidad (Desviación Estándar)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Retorno Esperado&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Devolver el DataFrame con las carteras no dominadas</span>
<span class="n">non_dominated_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[                       0%%                      ]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********            20%%                      ]  2 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**************        30%%                      ]  3 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[*******************   40%%                      ]  4 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************50%%                      ]  5 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************60%%***                   ]  6 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************70%%********              ]  7 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************80%%************          ]  8 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[**********************90%%*****************     ]  9 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[*********************100%%**********************]  10 of 10 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/local/python/3.10.13/lib/python3.10/site-packages/arch/univariate/base.py:311: DataScaleWarning: y is poorly scaled, which may affect convergence of the optimizer when
estimating the model parameters. The scale of y is 0.0005029. Parameter
estimation work better when this value is between 1 and 1000. The recommended
rescaling is 100 * y.

This warning can be disabled by either rescaling y before initializing the
model or by setting rescale=False.

  warnings.warn(
/usr/local/python/3.10.13/lib/python3.10/site-packages/arch/univariate/base.py:311: DataScaleWarning: y is poorly scaled, which may affect convergence of the optimizer when
estimating the model parameters. The scale of y is 0.0005928. Parameter
estimation work better when this value is between 1 and 1000. The recommended
rescaling is 100 * y.

This warning can be disabled by either rescaling y before initializing the
model or by setting rescale=False.

  warnings.warn(
/usr/local/python/3.10.13/lib/python3.10/site-packages/arch/univariate/base.py:311: DataScaleWarning: y is poorly scaled, which may affect convergence of the optimizer when
estimating the model parameters. The scale of y is 0.0004948. Parameter
estimation work better when this value is between 1 and 1000. The recommended
rescaling is 100 * y.

This warning can be disabled by either rescaling y before initializing the
model or by setting rescale=False.

  warnings.warn(
/usr/local/python/3.10.13/lib/python3.10/site-packages/arch/univariate/base.py:311: DataScaleWarning: y is poorly scaled, which may affect convergence of the optimizer when
estimating the model parameters. The scale of y is 0.0009928. Parameter
estimation work better when this value is between 1 and 1000. The recommended
rescaling is 100 * y.

This warning can be disabled by either rescaling y before initializing the
model or by setting rescale=False.

  warnings.warn(
/usr/local/python/3.10.13/lib/python3.10/site-packages/arch/univariate/base.py:311: DataScaleWarning: y is poorly scaled, which may affect convergence of the optimizer when
estimating the model parameters. The scale of y is 0.001638. Parameter
estimation work better when this value is between 1 and 1000. The recommended
rescaling is 10 * y.

This warning can be disabled by either rescaling y before initializing the
model or by setting rescale=False.

  warnings.warn(
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/local/python/3.10.13/lib/python3.10/site-packages/arch/univariate/base.py:311: DataScaleWarning: y is poorly scaled, which may affect convergence of the optimizer when
estimating the model parameters. The scale of y is 0.0002017. Parameter
estimation work better when this value is between 1 and 1000. The recommended
rescaling is 100 * y.

This warning can be disabled by either rescaling y before initializing the
model or by setting rescale=False.

  warnings.warn(
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/local/python/3.10.13/lib/python3.10/site-packages/arch/univariate/base.py:311: DataScaleWarning: y is poorly scaled, which may affect convergence of the optimizer when
estimating the model parameters. The scale of y is 0.0003523. Parameter
estimation work better when this value is between 1 and 1000. The recommended
rescaling is 100 * y.

This warning can be disabled by either rescaling y before initializing the
model or by setting rescale=False.

  warnings.warn(
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/local/python/3.10.13/lib/python3.10/site-packages/arch/univariate/base.py:311: DataScaleWarning: y is poorly scaled, which may affect convergence of the optimizer when
estimating the model parameters. The scale of y is 0.0003785. Parameter
estimation work better when this value is between 1 and 1000. The recommended
rescaling is 100 * y.

This warning can be disabled by either rescaling y before initializing the
model or by setting rescale=False.

  warnings.warn(
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/local/python/3.10.13/lib/python3.10/site-packages/arch/univariate/base.py:311: DataScaleWarning: y is poorly scaled, which may affect convergence of the optimizer when
estimating the model parameters. The scale of y is 0.0001202. Parameter
estimation work better when this value is between 1 and 1000. The recommended
rescaling is 100 * y.

This warning can be disabled by either rescaling y before initializing the
model or by setting rescale=False.

  warnings.warn(
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/local/python/3.10.13/lib/python3.10/site-packages/arch/univariate/base.py:311: DataScaleWarning: y is poorly scaled, which may affect convergence of the optimizer when
estimating the model parameters. The scale of y is 0.0004834. Parameter
estimation work better when this value is between 1 and 1000. The recommended
rescaling is 100 * y.

This warning can be disabled by either rescaling y before initializing the
model or by setting rescale=False.

  warnings.warn(
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[*********************100%%**********************]  1 of 1 completed
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.038789999485015866
</pre></div>
</div>
<img alt="_images/ff1f2e005f583c1bee07261c524969c18681b0e99964693f2f532a85b855d659.png" src="_images/ff1f2e005f583c1bee07261c524969c18681b0e99964693f2f532a85b855d659.png" />
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Volatility</th>
      <th>Return</th>
      <th>Sharpe Ratio</th>
      <th>AAPL</th>
      <th>GOOGL</th>
      <th>MSFT</th>
      <th>AMZN</th>
      <th>META</th>
      <th>BRK-B</th>
      <th>JPM</th>
      <th>V</th>
      <th>JNJ</th>
      <th>XOM</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.005710</td>
      <td>0.004548</td>
      <td>-5.997439</td>
      <td>0.066013</td>
      <td>0.055604</td>
      <td>0.115177</td>
      <td>0.046782</td>
      <td>0.029071</td>
      <td>0.076822</td>
      <td>0.124756</td>
      <td>0.186161</td>
      <td>0.229052</td>
      <td>0.070561</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.005791</td>
      <td>0.004987</td>
      <td>-5.837292</td>
      <td>0.070051</td>
      <td>0.058147</td>
      <td>0.012240</td>
      <td>0.029218</td>
      <td>0.029286</td>
      <td>0.189611</td>
      <td>0.169246</td>
      <td>0.161701</td>
      <td>0.209019</td>
      <td>0.071480</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.005890</td>
      <td>0.005083</td>
      <td>-5.723124</td>
      <td>0.050715</td>
      <td>0.103724</td>
      <td>0.059382</td>
      <td>0.022327</td>
      <td>0.037034</td>
      <td>0.032564</td>
      <td>0.215156</td>
      <td>0.167887</td>
      <td>0.213981</td>
      <td>0.097231</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.005936</td>
      <td>0.007922</td>
      <td>-5.199966</td>
      <td>0.107334</td>
      <td>0.040258</td>
      <td>0.077766</td>
      <td>0.072208</td>
      <td>0.025765</td>
      <td>0.130314</td>
      <td>0.181957</td>
      <td>0.137118</td>
      <td>0.196883</td>
      <td>0.030396</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.005986</td>
      <td>0.010139</td>
      <td>-4.786190</td>
      <td>0.067042</td>
      <td>0.010156</td>
      <td>0.087506</td>
      <td>0.011439</td>
      <td>0.042385</td>
      <td>0.190804</td>
      <td>0.223482</td>
      <td>0.140378</td>
      <td>0.180051</td>
      <td>0.046756</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>El hecho de que el ratio de Sharpe sea negativo con el modelo GARCH y positivo con la varianza tradicional puede implicar varias cosas:</p>
<ol class="arabic simple">
<li><p><strong>Estimaciones de Volatilidad</strong>:</p>
<ul class="simple">
<li><p><strong>Modelo GARCH</strong>: Este modelo captura la volatilidad dinámica y podría estar reflejando periodos recientes de alta volatilidad, lo que incrementa la estimación de riesgo (volatilidad). Un mayor denominador en la fórmula del ratio de Sharpe reduce el valor del ratio.</p></li>
<li><p><strong>Varianza Tradicional</strong>: Calcula la volatilidad como la desviación estándar de los retornos históricos, que es una medida más estable y promedia la volatilidad a lo largo de todo el periodo. Esto puede resultar en una menor estimación de volatilidad si los periodos recientes no han sido particularmente volátiles.</p></li>
</ul>
</li>
<li><p><strong>Retornos Ajustados al Riesgo</strong>:</p>
<ul class="simple">
<li><p>Un ratio de Sharpe negativo indica que el retorno esperado de la cartera es menor que la tasa libre de riesgo, ajustado por el riesgo. Esto sugiere que, según el modelo GARCH, la inversión no está siendo compensada adecuadamente por el riesgo asumido.</p></li>
<li><p>Un ratio de Sharpe positivo con la varianza tradicional sugiere que, en términos históricos, la inversión está proporcionando un retorno superior al de la tasa libre de riesgo, ajustado por la volatilidad histórica.</p></li>
</ul>
</li>
<li><p><strong>Tasa Libre de Riesgo</strong>:</p>
<ul class="simple">
<li><p>Si la tasa libre de riesgo es significativamente alta y los retornos esperados de las carteras no son suficientes para superarla, esto puede contribuir a un ratio de Sharpe negativo.</p></li>
</ul>
</li>
<li><p><strong>Sesgos en Datos Recientes</strong>:</p>
<ul class="simple">
<li><p>El modelo GARCH puede ser más sensible a los cambios recientes en la volatilidad y los retornos. Si los retornos recientes han sido bajos o negativos, esto puede resultar en un ratio de Sharpe negativo.</p></li>
</ul>
</li>
</ol>
</section>
</section>
<section id="interpretacion-y-consideraciones">
<h3><span class="section-number">58.3.3. </span>Interpretación y Consideraciones<a class="headerlink" href="#interpretacion-y-consideraciones" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p><strong>Volatilidad Dinámica</strong>: El modelo GARCH está diseñado para capturar la volatilidad que cambia con el tiempo. Si recientemente ha habido alta volatilidad, el modelo GARCH reflejará esto y podría mostrar un riesgo mayor, resultando en un ratio de Sharpe menor o negativo.</p></li>
<li><p><strong>Rendimiento Histórico vs. Dinámico</strong>: La varianza tradicional asume que la volatilidad es constante a lo largo del tiempo y puede no capturar bien los periodos de alta volatilidad reciente. Esto puede hacer que las carteras parezcan menos riesgosas en comparación con las estimaciones del modelo GARCH.</p></li>
<li><p><strong>Evaluación del Riesgo</strong>: Es importante considerar ambas estimaciones (varianza tradicional y GARCH) para una evaluación completa del riesgo. La volatilidad tradicional puede subestimar el riesgo en periodos de alta volatilidad reciente, mientras que el modelo GARCH puede proporcionar una visión más precisa del riesgo actual.</p></li>
</ol>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="DipFin%20Sesion%203.2.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">37. </span>1. Introducción a las Redes Neuronales</p>
      </div>
    </a>
    <a class="right-next"
       href="DipFin%20Sesion%203.4.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">59. </span>Introducción al Análisis de Clustering</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">48. Introducción a Modelos de Series Temporales</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definicion-de-series-temporales">48.1. Definición de Series Temporales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aplicaciones-en-finanzas">48.2. Aplicaciones en Finanzas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-introductorio-en-python">48.3. Ejemplo Introductorio en Python</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#modelado-arima-para-pronostico-de-mercados">49. Modelado ARIMA para Pronóstico de Mercados</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fundamentos-de-arima">49.1. Fundamentos de ARIMA</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seleccion-de-parametros-y-diagnostico">49.2. Selección de Parámetros y Diagnóstico</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#modelado-autoregresivo-ar">50. Modelado Autoregresivo (AR)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ecuacion-del-modelo-ar">50.1. Ecuación del Modelo AR</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#estimacion-de-parametros">50.2. Estimación de Parámetros</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#diagnostico-del-modelo">50.3. Diagnóstico del Modelo</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-grafico-con-python">50.4. Ejemplo Gráfico con Python</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#modelo-de-media-movil-ma">51. Modelo de Media Móvil (MA)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fundamentos-del-modelo-ma">51.1. Fundamentos del Modelo MA</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interpretacion-de-los-parametros">51.2. Interpretación de los Parámetros</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-grafico">51.3. Ejemplo Gráfico</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#historia-de-los-modelos-garch">52. Historia de los Modelos GARCH</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fundamentacion-matematica-de-garch">53. Fundamentación Matemática de GARCH</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#comparativo-entre-modelos-arima-y-garch">54. Comparativo entre Modelos ARIMA y GARCH</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplos-de-aplicacion-en-finanzas">55. Ejemplos de Aplicación en Finanzas</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-practico-uso-de-datos-reales-con-yahoo-finance">56. Ejemplo Práctico: Uso de Datos Reales con Yahoo Finance</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tipos-de-volatilidad-en-series-financieras">57. Tipos de Volatilidad en Series Financieras</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#volatilidad-historica-clasica">57.1. Volatilidad Histórica (Clásica)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#volatilidad-media-cero">57.2. Volatilidad Media Cero</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#volatilidad-con-suavizamiento-exponencial-tiempo-t">57.3. Volatilidad con Suavizamiento Exponencial (Tiempo <span class="math notranslate nohighlight">\( t \)</span>)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#volatilidad-con-suavizamiento-exponencial-tiempo-t-1">57.4. Volatilidad con Suavizamiento Exponencial (Tiempo <span class="math notranslate nohighlight">\( t+1 \)</span>)</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-valor-en-riesgo-var-utilizando-diferentes-metodos">58. Análisis de Valor en Riesgo (VaR) Utilizando Diferentes Métodos</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion">58.1. Introducción</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metodos-y-aplicaciones">58.1.1. Métodos y Aplicaciones</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#var-parametrico">58.1.1.1. VaR Paramétrico</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#var-no-parametrico">58.1.1.2. VaR No Paramétrico</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#var-montecarlo">58.1.1.3. VaR Montecarlo</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resultados">58.2. Resultados</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interpretacion-de-los-resultados">58.3. Interpretación de los Resultados</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion-a-la-frontera-eficiente">58.3.1. Introducción a la Frontera Eficiente</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#historia">58.3.1.1. Historia</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#concepto-matematico-de-dominancia">58.3.1.2. Concepto Matemático de Dominancia</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-con-10-acciones-usando-yahoofinance-y-calculos-en-python">58.3.1.3. Ejemplo con 10 Acciones Usando YahooFinance y Cálculos en Python</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conceptos-matematicos-para-el-calculo-de-volatilidad-y-retorno-esperado">58.3.2. Conceptos Matemáticos para el Cálculo de Volatilidad y Retorno Esperado</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#retorno-esperado">58.3.2.1. Retorno Esperado</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#volatilidad">58.3.2.2. Volatilidad</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#interpretacion-y-consideraciones">58.3.3. Interpretación y Consideraciones</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book Community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>